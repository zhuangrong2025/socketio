<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-capable" content="yes">
<meta name="format-detection" content="telephone=no" />
<title>drive</title>
<link rel="stylesheet" href="/stylesheets/drive.css">
<script src="/socket.io/socket.io.js"></script>
<script src="/javascripts/jquery-3.2.1.min.js"></script>
<script>
$(function () {
    var socket = io();
    $(".broadcast button").each(function(){
      $(this).on("click",function(){
        socket.emit('chat message', $(this).attr("title"));
      })
    })
    // 服务器推送过来的消息
    socket.on('chat message', function(msg){
      $(".audio-list li audio").each(function(){
         $(this)[0].pause()
      })
      setTimeout(function(){
        $("#" + msg)[0].currentTime = 0
        $("#" + msg)[0].play()
      },10)
    });

    // 点击切换ad图片
    $(".ad").on("click",function(){
      $(this).css("background-image","url(images/train.jpg)")
    })
  });
</script>
</head>
<body>
  <div class="broadcast-wrap">
    <!-- ad -->
    <div class="ad-wrap">
      <div class="ad" style="background-image:url(images/ad.png)">
      </div>
    </div>
    <!-- //ad -->
    <!-- 按钮组 -->
    <div class="broadcast">
      <div class="btn-group point">
        <button title="">没安<br>全带<em>扣100</em></button>
        <button title="">车身<br>出线<em>扣100</em></button>
        <button title="">车轮<br>出线<em>扣100</em></button>
        <button title="">中途<br>停车<em>扣10</em></button>
        <button title="">没方<br>向灯<em>扣10</em></button>
        <button title="">定点<br>不准<em>扣10</em></button>
        <button title="">靠边<br>不准<em>扣10</em></button>
        <button title="">熄火<br><em>扣10</em></button>
        <button title="">空</button>
        <button title="">空</button>
      </div>
      <div class="btn-group console">
        <button title="">合格</button>
        <button title="">不<br>合格</button>
        <button title="">空</button>
        <button title="">空</button>
        <button title="">空</button>
      </div>
      <div class="btn-group project">
        <button title="poDao">坡道<br>起步</button>
        <button title="cheFan">侧方<br>停车</button>
        <button title="quXian">曲线<br>行驶</button>
        <button title="zhiJiao">直角<br>拐弯</button>
        <button title="ruku">倒车<br>入库</button>
      </div>
      <div class="btn-start">
        <button title="start">考试开始</button>
      </div>
    </div>
    <!-- // 按钮组 -->
  </div>

  <!-- 音频 -->
  <div class="audio-list">
    <ul>
      <li>
        <audio id="start" preload="auto" src="/images/start.mp3" x5nativepanel=""></audio>
      </li>
      <li>
        <audio id="ruku" preload="auto" src="/images/ruku.mp3" x5nativepanel=""></audio>
      </li>
    </ul>
  </div>
  <!-- // 音频 -->
</body>
</html>
